import{initializeApp as k}from"https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";import{getAuth as L,GoogleAuthProvider as f,signInWithRedirect as x,getRedirectResult as w,onAuthStateChanged as b}from"https://www.gstatic.com/firebasejs/11.3.1/firebase-auth.js";import{getDatabase as m,ref as l,onValue as y,set as I,remove as A}from"https://www.gstatic.com/firebasejs/11.3.1/firebase-database.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const d of t.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();document.getElementById("textwhpform");const h=k({apiKey:"AIzaSyA58GQ4lc3s8BVZECdGvBgEyeoGqs3PAXw",authDomain:"gmynimaxiproductos.firebaseapp.com",databaseURL:"https://gmynimaxiproductos-default-rtdb.firebaseio.com",projectId:"gmynimaxiproductos",storageBucket:"gmynimaxiproductos.firebasestorage.app",messagingSenderId:"298345288781",appId:"1:298345288781:web:f922cbe731ef41c2f4f804",measurementId:"G-WL73MRRKNM"}),u=L(h),P=new f(h),v=document.getElementById("accedergoogle"),N=document.getElementById("cerrarsesion"),R=document.getElementById("emailinisesion"),O=document.getElementById("logininac"),C=document.getElementById("loginac");document.getElementById("idinfo");const D=document.getElementById("loginactivo");document.getElementById("cmdlimpiar");document.getElementById("textwhpform");document.getElementById("resultado");document.getElementById("idresout");document.getElementById("cmdgrabaregcontacti");v.addEventListener("click",i=>{x(u,P),w(u).then(o=>{f.credentialFromResult(o).accessToken,o.user}).catch(o=>{o.code,o.message,f.credentialFromError(o)})});N.addEventListener("click",i=>{u.signOut().then(()=>{document.getElementById("login").style.display="block",document.getElementById("accedergoogle").style.display="block",document.getElementById("cerrarsesion").style.display="none",document.getElementById("emailinisesion").innerText="Email",window.location.reload()}).catch(o=>{console.error("Error al cerrar sesiÃ³n:",o)})});b(u,i=>{if(i){const o=i.uid,s=i.displayName,n=i.email,e=btoa(n),t=m(),d=l(t,"usuario/idkey:"+e);y(d,c=>{if(c.val()!==null)document.getElementById("login").style.display="none",document.getElementById("loginactivo").style.display="block",document.getElementById("accedergoogle").style.display="none",document.getElementById("cerrarsesion").style.display="block",document.getElementById("emailinisesion").innerText=n,document.getElementById("logininac").style.display="none";else{document.getElementById("login").style.display="block",document.getElementById("loginactivo").style.display="none",document.getElementById("cerrarsesion").style.display="none",document.getElementById("emailinisesion").innerText="Email",document.getElementById("logininac").style.display="block";const a="usuario/idkey:"+e;I(l(t,a),{nombre:s,email:n,key:o,idrol:4,idnivel:2})}})}else v.style.display="block",D.style.display="none",R.style.display="none",N.style.display="none",O.style.display="block",C.style.display="none"});document.getElementById("");const g=document.getElementById("product-list"),r=document.getElementById("product-name"),G=document.getElementById("idbtnadd"),p=document.getElementById("idbtngrabar"),S=document.getElementById("idbtneliminar"),E=document.getElementById("idbtnedit"),T=document.getElementById("idbtnuevo"),j="";b(u,i=>{if(i){G.addEventListener("click",n=>{const e=r.value;if(e.trim()!==""){const t=m(),d=l(t,"productos/producto:"+e);y(d,c=>{if(c.val()==null){const a="productos/producto:"+e;I(l(t,a),{nombre:e})}else console.log("Nombre Producto No Existe!")})}else console.log("Digite Nombre Producto")}),S.addEventListener("click",n=>{const e=r.value;if(e.trim()!==""){const t=m(),d=l(t,"productos/producto:"+e);A(d).then(()=>{localStorage.removeItem(r.value),window.location.reload(),console.log("Registro eliminado correctamente")}).catch(c=>{console.error("Error al eliminar el registro:",c)})}else console.log("Digite Nombre Producto")}),E.addEventListener("click",n=>{r.value.trim()!==""?(p.style.display="block",E.style.display="none"):console.log("Digite Nombre Producto")}),p.addEventListener("click",n=>{const e=r.value;if(e.trim()!==""){const t=m(),d=l(t,"productos/producto:"+j);y(d,c=>{if(c.val()!==null){const a="productos/producto:"+e;I(l(t,a),{nombre:e})}})}else console.log("Digite Nombre Producto")}),T.addEventListener("click",n=>{E.style.display="block",p.style.display="none",r.value=""});const o=m(),s=l(o,"productos");y(s,n=>{g.innerHTML="";const e=n.val();if(e)Object.keys(e).forEach(t=>{const d=e[t],c=document.createElement("li");c.classList.add("list-group-item"),c.textContent=d.nombre,g.appendChild(c)});else{const t=document.createElement("li");t.classList.add("list-group-item"),t.textContent="No hay productos registrados.",g.appendChild(t)}})}else console.log("No hay usuario autenticado")});document.getElementById("ejecutarFuncion");document.getElementById("textwhpform");document.getElementById("resultado");document.getElementById("textwhpform");document.getElementById("resultado");document.getElementById("idresout");document.getElementById("idjsondata");document.getElementById("idinfo");
